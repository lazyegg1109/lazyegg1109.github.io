(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{400:function(s,a,t){s.exports=t.p+"assets/img/image-20220804141738976.2a3f9c7c.png"},401:function(s,a,t){s.exports=t.p+"assets/img/image-20220804142955096.506f074e.png"},402:function(s,a,t){s.exports=t.p+"assets/img/image-20220804143123275.506f074e.png"},403:function(s,a,t){s.exports=t.p+"assets/img/image-20220804144307242.c27564cc.png"},404:function(s,a,t){s.exports=t.p+"assets/img/image-20220804151958681.de6614b5.png"},405:function(s,a,t){s.exports=t.p+"assets/img/image-20220804152904359.b08e5652.png"},406:function(s,a,t){s.exports=t.p+"assets/img/image-20220804153737520.9adedba0.png"},407:function(s,a,t){s.exports=t.p+"assets/img/image-20220804153910891.1aae242a.png"},408:function(s,a,t){s.exports=t.p+"assets/img/image-20220804161330891.92fbf8da.png"},409:function(s,a,t){s.exports=t.p+"assets/img/image-20220804162501382.954e2a4e.png"},410:function(s,a,t){s.exports=t.p+"assets/img/image-20220804165610178.42fb1810.png"},411:function(s,a,t){s.exports=t.p+"assets/img/image-20220805135556391.17294bef.png"},412:function(s,a,t){s.exports=t.p+"assets/img/image-20220805142941080.dbc1545e.png"},413:function(s,a,t){s.exports=t.p+"assets/img/image-20220805143127981.1d864c6e.png"},414:function(s,a,t){s.exports=t.p+"assets/img/image-20220805150627188.7c7b4089.png"},415:function(s,a,t){s.exports=t.p+"assets/img/image-20220805162556746.4ccb1f76.png"},416:function(s,a,t){s.exports=t.p+"assets/img/image-20220805163300868.95abc8c1.png"},417:function(s,a,t){s.exports=t.p+"assets/img/image-20220805163800476.08b3ff28.png"},418:function(s,a,t){s.exports=t.p+"assets/img/image-20220805170818923.a8f15ea0.png"},522:function(s,a,t){"use strict";t.r(a);var e=t(3),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("8月8日更新")])]),s._v(" "),a("h3",{attrs:{id:"docker介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker介绍"}},[s._v("#")]),s._v(" Docker介绍")]),s._v(" "),a("p",[s._v("大型项目组件较多，运行环境也较为复杂，部署时会碰到一些问题：")]),s._v(" "),a("ul",[a("li",[s._v("依赖关系复杂，容易出现兼容性问题")]),s._v(" "),a("li",[s._v("开发、测试、生产环境有差异")])]),s._v(" "),a("p",[s._v("Docker如何解决依赖的兼容问题的？")]),s._v(" "),a("ul",[a("li",[s._v("将应用的Libs（函数库）、Deps（依赖）、配置与应用一起打包")]),s._v(" "),a("li",[s._v("将每个应用放到一个隔离容器去运行，避免互相干扰")])]),s._v(" "),a("p",[s._v("注意：仅限于同一个操作系统，这是因为docker是在操作系统的基础空间上运行的。")]),s._v(" "),a("h3",{attrs:{id:"docker如何解决不同的操作系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker如何解决不同的操作系统"}},[s._v("#")]),s._v(" Docker如何解决不同的操作系统")]),s._v(" "),a("p",[s._v("内核与硬件交互，提供操作硬件的指令")]),s._v(" "),a("p",[s._v("系统应用封装内核指令为函数，便于程序员调用")]),s._v(" "),a("p",[s._v("用户程序基于系统函数库实现功能")]),s._v(" "),a("p",[a("img",{attrs:{src:t(400),alt:"image-20220804141738976"}})]),s._v(" "),a("p",[s._v("为什么应用需要在同一个操作系统中？")]),s._v(" "),a("p",[s._v("这是因为虽然都是基于Linux内核，但是系统应用不同，提供的函数库有差异。例如CentOS中没有Ubuntu中的某些函数库。")]),s._v(" "),a("p",[s._v("函数库是写死的，是执行时调用的方法函数。所以Docker会将依赖和需要的函数库一起打包。这样，就不会管系统应用是什么了，可以直接操作内核。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("Docker如何解决不同系统环境的问题？")])]),a("ul",[a("li",[s._v("Docker将用户程序与所需要调用的系统(比如Ubuntu)函数库一起打包")]),s._v(" "),a("li",[s._v("Docker运行到不同操作系统时，直接基于打包的库函数，借助于操作系统的Linux内核来运行")])]),s._v(" "),a("p",[s._v("Docker如何解决大型项目依赖关系复杂，不同组件依赖的兼容性问题？")]),s._v(" "),a("ul",[a("li",[s._v("Docker允许开发中将应用、依赖、函数库、配置一起打包，形成可移植镜像")]),s._v(" "),a("li",[s._v("Docker应用运行在容器中，使用沙箱机制，相互隔离")])]),s._v(" "),a("p",[s._v("Docker如何解决开发、测试、生产环境有差异的问题")]),s._v(" "),a("ul",[a("li",[s._v("Docker镜像中包含完整运行环境，包括系统函数库，仅依赖系统的Linux内核，因此可以在任意Linux操作系统上运行")])]),s._v(" "),a("h3",{attrs:{id:"docker与虚拟机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker与虚拟机"}},[s._v("#")]),s._v(" Docker与虚拟机")]),s._v(" "),a("p",[s._v("虚拟机（virtual machine）是在操作系统中模拟硬件设备，然后运行另一个操作系统，比如在 Windows 系统里面运行 Ubuntu 系统，这样就可以运行任意的Ubuntu应用了。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(401),alt:"image-20220804142955096"}})]),s._v(" "),a("p",[s._v("Docker与虚拟机的对比：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(402),alt:"image-20220804143123275"}})]),s._v(" "),a("p",[s._v("Docker和虚拟机的差异：")]),s._v(" "),a("ul",[a("li",[s._v("docker是一个系统进程；虚拟机是在操作系统中的操作系统")]),s._v(" "),a("li",[s._v("docker体积小、启动速度快、性能好；虚拟机体积大、启动速度慢、性能一般")])]),s._v(" "),a("h3",{attrs:{id:"docker镜像和容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像和容器"}},[s._v("#")]),s._v(" Docker镜像和容器")]),s._v(" "),a("p",[s._v("镜像（Image）：Docker将应用程序及其所需的依赖、函数库、环境、配置等文件打包在一起，称为镜像。")]),s._v(" "),a("p",[s._v("容器（Container）：镜像中的应用程序运行后形成的进程就是容器，只是Docker会给容器做隔离，对外不可见。")]),s._v(" "),a("p",[s._v("通过Linux的隔离手段，一个容器会以为自己是当前计算机系统上的唯一进程，从而做到了隔离效果。")]),s._v(" "),a("h4",{attrs:{id:"关于数据读取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于数据读取"}},[s._v("#")]),s._v(" 关于数据读取")]),s._v(" "),a("p",[s._v("容器是不可以把数据写入镜像文件中的，因为会对镜像进行污染。所以镜像"),a("strong",[s._v("只读不写")]),s._v("。若要写数据，则拷贝一份文件到容器自己的独立文件系统里。")]),s._v(" "),a("h3",{attrs:{id:"docker和dockerhub"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker和dockerhub"}},[s._v("#")]),s._v(" Docker和DockerHub")]),s._v(" "),a("ul",[a("li",[s._v("DockerHub：DockerHub是一个Docker镜像的托管平台。这样的平台称为Docker Registry。")]),s._v(" "),a("li",[s._v("国内也有类似于DockerHub 的公开服务，比如 网易云镜像服务、阿里云镜像库等。")])]),s._v(" "),a("h3",{attrs:{id:"docker架构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker架构"}},[s._v("#")]),s._v(" Docker架构")]),s._v(" "),a("p",[s._v("Docker是一个CS架构的程序，由两部分组成：")]),s._v(" "),a("ul",[a("li",[s._v("服务端(server)：Docker守护进程，负责处理Docker指令，管理镜像、容器等")]),s._v(" "),a("li",[s._v("客户端(client)：通过命令或RestAPI向Docker服务端发送指令。可以在本地或远程向服务端发送指令。")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(403),alt:"image-20220804144307242"}})]),s._v(" "),a("h3",{attrs:{id:"docker架构小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker架构小结"}},[s._v("#")]),s._v(" Docker架构小结")]),s._v(" "),a("p",[s._v("镜像：")]),s._v(" "),a("ul",[a("li",[s._v("将应用程序及其依赖、环境、配置打包在一起")])]),s._v(" "),a("p",[s._v("容器：")]),s._v(" "),a("ul",[a("li",[s._v("镜像运行起来就是容器，一个镜像可以运行多个容器")])]),s._v(" "),a("p",[s._v("Docker结构：")]),s._v(" "),a("ul",[a("li",[s._v("服务端：接收命令或远程请求，操作镜像或容器")]),s._v(" "),a("li",[s._v("客户端：发送命令或者请求到Docker服务端")])]),s._v(" "),a("p",[s._v("DockerHub：")]),s._v(" "),a("ul",[a("li",[s._v("一个镜像托管的服务器，类似的还有阿里云镜像服务，统称为DockerRegistry")])]),s._v(" "),a("h3",{attrs:{id:"安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装Docker")]),s._v(" "),a("h4",{attrs:{id:"操作系统版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作系统版本"}},[s._v("#")]),s._v(" 操作系统版本")]),s._v(" "),a("p",[s._v("Docker CE 支持 64 位版本 CentOS 7，并且要求内核版本不低于 3.10， CentOS 7 满足最低内核的要求，所以我们在CentOS 7安装Docker。")]),s._v(" "),a("h4",{attrs:{id:"官网"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官网"}},[s._v("#")]),s._v(" 官网")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.docker.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.docker.com"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"_1-1-卸载-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-卸载-可选"}},[s._v("#")]),s._v(" 1.1.卸载（可选）")]),s._v(" "),a("p",[s._v("如果之前安装过旧版本的Docker，可以使用下面命令卸载：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-selinux \\\n                  docker-engine-selinux \\\n                  docker-engine \\\n                  docker-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h4",{attrs:{id:"_1-2-安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装docker"}},[s._v("#")]),s._v(" 1.2.安装docker")]),s._v(" "),a("p",[s._v("首先需要大家虚拟机联网，安装yum工具")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n           device-mapper-persistent-data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n           lvm2 --skip-broken\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后更新本地镜像源：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置docker镜像源")]),s._v("\nyum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n    \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/download.docker.com/mirrors.aliyun.com\\/docker-ce/g'")]),s._v(" /etc/yum.repos.d/docker-ce.repo\n\nyum makecache fast\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("然后输入命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("docker-ce为社区免费版本。稍等片刻，docker即可安装成功。")])]),s._v(" "),a("h4",{attrs:{id:"_1-3-启动docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-启动docker"}},[s._v("#")]),s._v(" 1.3.启动docker")]),s._v(" "),a("p",[s._v("Docker应用需要用到各种端口，逐一去修改防火墙设置。非常麻烦，因此建议大家直接关闭防火墙！")]),s._v(" "),a("p",[s._v("启动docker前，关闭防火墙（一般不用关闭）")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭")]),s._v("\nsystemctl stop firewalld\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止开机启动防火墙")]),s._v("\nsystemctl disable firewalld\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("通过命令启动docker：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动docker服务")]),s._v("\n\nsystemctl stop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止docker服务")]),s._v("\n\nsystemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启docker服务")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("然后输入命令，可以查看docker版本：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"方式二安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方式二安装"}},[s._v("#")]),s._v(" 方式二安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.yum包更新到最新")]),s._v("\nyum update\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.安装需要的软件包，yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils device-mapper-persistent-data lvm2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.设置yum源")]),s._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.安装docker，出现输入的界面都按 y")]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5.查看docker版本，验证是否成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"配置镜像加速器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置镜像加速器"}},[s._v("#")]),s._v(" 配置镜像加速器")]),s._v(" "),a("p",[s._v("一这里使用的是阿里云的镜像加速器，地址：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("以下为阿里云提供的操作文档：")]),s._v(" "),a("blockquote",[a("p",[s._v("针对Docker客户端版本大于 1.10.0 的用户")]),s._v(" "),a("p",[s._v("您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建了一个文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将阿里云的镜像文件配置写入文件内")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://4p32toi3.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"docker基本操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker基本操作"}},[s._v("#")]),s._v(" Docker基本操作")]),s._v(" "),a("h4",{attrs:{id:"镜像相关命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像相关命令"}},[s._v("#")]),s._v(" 镜像相关命令")]),s._v(" "),a("ul",[a("li",[s._v("镜像名称一般分两部分组成：[repository]:[tag]。")]),s._v(" "),a("li",[s._v("在没有指定tag时，默认是latest，代表最新版本的镜像")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(404),alt:"image-20220804151958681"}})]),s._v(" "),a("h4",{attrs:{id:"镜像操作命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像操作命令"}},[s._v("#")]),s._v(" 镜像操作命令")]),s._v(" "),a("p",[a("img",{attrs:{src:t(405),alt:"image-20220804152904359"}})]),s._v(" "),a("h4",{attrs:{id:"从dockerhub拉取一个镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从dockerhub拉取一个镜像"}},[s._v("#")]),s._v(" 从DockerHub拉取一个镜像")]),s._v(" "),a("p",[s._v("DockerHub官网：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("搜索镜像名称，例如Nginx：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(406),alt:"image-20220804153737520"}})]),s._v(" "),a("p",[s._v("镜像详情页会有所有版本已经介绍，在右侧会有pull命令：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(407),alt:"image-20220804153910891"}})]),s._v(" "),a("p",[s._v("在控制面板输入命令，等待安装即可：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull nginx")]),s._v("\nUsing default tag: latest\nlatest: Pulling from library/nginx\na2abf6c4d29d: Pull complete \na9edb18cadd1: Pull complete \n589b7251471a: Pull complete \n186b1aaa4aa6: Pull complete \nb4df32aa5a72: Pull complete \na0bcbecc962e: Pull complete \nDigest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" nginx:latest\ndocker.io/library/nginx:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("通过输入"),a("code",[s._v("docker images")]),s._v("命令可以查看目前已经pull下来的镜像：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nnginx         latest    605c77e624dd   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" months ago    141MB\nhello-world   latest    feb5d9fea6a5   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" months ago   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"利用docker-save导出镜像到磁盘-load加载回来"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#利用docker-save导出镜像到磁盘-load加载回来"}},[s._v("#")]),s._v(" 利用docker save导出镜像到磁盘，load加载回来")]),s._v(" "),a("p",[s._v("步骤一：利用docker xx --help命令查看docker save和docker load的语法")]),s._v(" "),a("p",[a("code",[s._v("docker save")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker save --help")]),s._v("\n\nUsage:  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" save "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" IMAGE "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IMAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存一个或多个镜像到tar文件中")]),s._v("\nSave one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images to a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("streamed to STDOUT by default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nOptions:\n  -o, --output string   Write to a file, instead of STDOUT\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("code",[s._v("docker load")])]),s._v(" "),a("p",[s._v("-i：打印日志")]),s._v(" "),a("p",[s._v("-q：安静的，不会打印日志")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker load --help")]),s._v("\n\nUsage:  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" load "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nLoad an image from a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive or STDIN\n\nOptions:\n  -i, --input string   Read from "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive file, instead of STDIN\n  -q, --quiet          Suppress the load output\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("步骤二：使用docker save导出镜像到磁盘")]),s._v(" "),a("p",[s._v("使用"),a("code",[s._v("docker save -o [保存到哪一个文件] [镜像名称:tag]")]),s._v("导出")]),s._v(" "),a("p",[s._v("可以看到，导出了镜像文件到nginx.tar中：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker save -o nginx.tar nginx:latest")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("142532")]),s._v("\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1781")]),s._v(" Apr  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" cosfs.sh\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1237")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" dnspod.sh\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25166")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v(" install_panel.sh\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2258")]),s._v(" Mar  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" install.sh\n-rw------- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("145905152")]),s._v(" Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":50 nginx.tar\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1219")]),s._v(" Feb  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" txcdn.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("步骤三：使用docker load加载镜像")]),s._v(" "),a("p",[s._v("首先我们将镜像删除："),a("code",[s._v("docker rmi [镜像名:tag(或者id)]")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi nginx:latest")]),s._v("\nUntagged: nginx:latest\nUntagged: nginx@sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31\nDeleted: sha256:605c77e624ddb75e6110f997c58876baa13f8754486b461117934b24a9dc3a85\nDeleted: sha256:b625d8e29573fa369e799ca7c5df8b7a902126d2b7cbeb390af59e4b9e1210c5\nDeleted: sha256:7850d382fb05e393e211067c5ca0aada2111fcbe550a90fed04d1c634bd31a14\nDeleted: sha256:02b80ac2055edd757a996c3d554e6a8906fd3521e14d1227440afd5163a5f1c4\nDeleted: sha256:b92aa5824592ecb46e6d169f8e694a99150ccef01a2aabea7b9c02356cdabe7c\nDeleted: sha256:780238f18c540007376dd5e904f583896a69fe620876cabc06977a3af4ba4fb5\nDeleted: sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("然后我们可以通过load命令来加载镜像了。")]),s._v(" "),a("p",[s._v("执行"),a("code",[s._v("docker load -i [文件名]")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker load -i nginx.tar")]),s._v("\n2edcec3590a4: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(".86MB/83.86MB\ne379e8aedd4d: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("     62MB/62MB\nb8d6e692a25e: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".072kB/3.072kB\nf1db227348d0: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".096kB/4.096kB\n32ce5f6a5106: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".584kB/3.584kB\nd874fd2bc83b: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(".168kB/7.168kB\nLoaded image: nginx:latest\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"容器相关命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器相关命令"}},[s._v("#")]),s._v(" 容器相关命令")]),s._v(" "),a("p",[a("img",{attrs:{src:t(408),alt:"image-20220804161330891"}})]),s._v(" "),a("p",[s._v("暂停：系统会将容器进程挂起，将容器关联的内存暂存起来，恢复之后，接着被运行。")]),s._v(" "),a("p",[s._v("停止：系统将进程杀死，将内存回收。start之后，会重新创建全新的进程。")]),s._v(" "),a("h4",{attrs:{id:"创建一个容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个容器"}},[s._v("#")]),s._v(" 创建一个容器")]),s._v(" "),a("p",[s._v("步骤一：去docker hub查看Nginx的容器运行命令命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name containerName -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 -d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解读：")]),s._v(" "),a("ul",[a("li",[s._v("docker run ：创建并运行一个容器")]),s._v(" "),a("li",[s._v("--name : 给容器起一个名字，比如叫做mn")]),s._v(" "),a("li",[s._v("-p ：将宿主机端口与容器端口映射，冒号左侧是宿主机端口，右侧是容器端口")]),s._v(" "),a("li",[s._v("-d：后台运行容器")]),s._v(" "),a("li",[s._v("nginx：镜像名称，例如nginx")])]),s._v(" "),a("p",[a("img",{attrs:{src:t(409),alt:"image-20220804162501382"}})]),s._v(" "),a("p",[s._v("通过以下命令来创建一个容器：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name mn -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 -d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@VM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# docker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("name mn "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d nginx\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("b0adfd41703d6ceec00396bcaf52c8dd9bc6a5371c1e1052d7169fb9069e0e5\ndocker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),s._v(" response from daemon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" driver failed programming external connectivity on endpoint mn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e4a71cb76504ad0921984b224a6289bb07d497c490344440d40396182ade2bb7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),s._v(" starting userland proxy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" listen tcp4 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" bind"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" address already in use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("以上是报错信息，因为端口号被占用，使用另外的端口就行了。")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run --name mn -p 81:80 -d nginx")]),s._v("\n15c2c5c87c8d81150a244014beb60e977ae8e8be0b987b109fda82f3f11b8427\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("创建成功之后，通过ip加上代理的port端口号便可访问：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(410),alt:"image-20220804165610178"}})]),s._v(" "),a("p",[s._v("可以使用"),a("code",[s._v("docker logs [容器名称]")]),s._v("查看日志")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs mn")]),s._v("\n/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration\n/docker-entrypoint.sh: Looking "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" shell scripts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /docker-entrypoint.d/\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /etc/nginx/conf.d/default.conf\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh\n/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh\n/docker-entrypoint.sh: Configuration complete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ready "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" start up\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#1: using the "epoll" event method')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: nginx/1.21.5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6) ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: OS: Linux 3.10.0-1160.49.1.el7.x86_64")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: start worker processes")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: start worker process 32")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:53:04 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: start worker process 33")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.94")]),s._v(".13.13 - - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("04/Aug/2022:08:55:26 +0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET / HTTP/1.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("615")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("112.94")]),s._v(".13.13 - - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("04/Aug/2022:08:55:26 +0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET /favicon.ico HTTP/1.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("555")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://43.138.140.213:81/"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("/08/04 08:55:26 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#33: *2 open() "/usr/share/nginx/html/favicon.ico" failed (2: No such file or directory), client: 112.94.13.13, server: localhost, request: "GET /favicon.ico HTTP/1.1", host: "43.138.140.213:81", referrer: "http://43.138.140.213:81/"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("持续的日志输出")])]),a("p",[s._v("因为上述的日志是要自己手动获取的，不太方便于调试。")]),s._v(" "),a("p",[s._v("我们可以执行"),a("code",[s._v("docker logs -f [容器名]")])]),s._v(" "),a("h4",{attrs:{id:"进入容器-修改内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入容器-修改内容"}},[s._v("#")]),s._v(" 进入容器，修改内容")]),s._v(" "),a("p",[s._v("步骤一：进入容器。进入我们刚刚创建的nginx容器的命令为：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("容器名称"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("命令解读：")]),s._v(" "),a("ul",[a("li",[s._v("docker exec ：进入容器内部，执行一个命令")]),s._v(" "),a("li",[s._v("-it : 给当前进入的容器创建一个标准输入、输出终端，允许我们与容器交互")]),s._v(" "),a("li",[s._v("mn ：要进入的容器的名称")]),s._v(" "),a("li",[s._v("bash：进入容器后执行的命令，bash是一个linux终端交互命令")])]),s._v(" "),a("p",[s._v("进入后会发现，前置的编号就是容器的ID：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                               NAMES\n15c2c5c87c8d   nginx     "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:81-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp, :::81-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp   mn\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it mn bash")]),s._v("\nroot@15c2c5c87c8d:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("我们试试看执行"),a("code",[s._v("ls")]),s._v("命令，会发现其目录的结构和Linux基本一样：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("root@15c2c5c87c8d:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin   dev\t\t   docker-entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var\nboot  docker-entrypoint.d  etc\t\t\t lib   media  opt  root  sbin  sys  usr\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("但是，这些文件，只有与nginx有关的才是有意义的。")]),s._v(" "),a("p",[s._v("那么我们怎么知道nginx的文件放在哪一个文件下呢？我们不知道。不过我们可以借助dockerhub官网查看。")]),s._v(" "),a("blockquote",[a("p",[s._v("Alternatively, a simple "),a("code",[s._v("Dockerfile")]),s._v(" can be used to generate a new image that includes the necessary content (which is a much cleaner solution than the bind mount above):")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("FROM nginx\nCOPY static-html-directory /usr/share/nginx/html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("p",[s._v("我们可以知道，nginx的静态资源存放在了/usr/share/nginx/html下。")]),s._v(" "),a("p",[s._v("我们进入路径下，查看路径文件，可以看到有两个html文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("root@15c2c5c87c8d:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/share/nginx/html")]),s._v("\nroot@15c2c5c87c8d:/usr/share/nginx/html"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n50x.html  index.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("我们执行以下命令，可以直接修改文件中的内容：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s#Welcome to nginx#早睡蛋学docker#g'")]),s._v(" index.html\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s#<head>#<head><meta charset=\"utf-8\">#g'")]),s._v(" index.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:t(411),alt:"image-20220805135556391"}})]),s._v(" "),a("h4",{attrs:{id:"退出容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#退出容器"}},[s._v("#")]),s._v(" 退出容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止容器"}},[s._v("#")]),s._v(" 停止容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("容器名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"删除容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[s._v("#")]),s._v(" 删除容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("容器名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注意，删除前要先停止容器，不然删除不了：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rm mn")]),s._v("\nError response from daemon: You cannot remove a running container 15c2c5c87c8d81150a244014beb60e977ae8e8be0b987b109fda82f3f11b8427. Stop the container before attempting removal or force remove\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("我们可以使用强制删除命令来删除，这样就不用每次都先停再删了。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("容器名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"docker运行redis容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker运行redis容器"}},[s._v("#")]),s._v(" Docker运行Redis容器")]),s._v(" "),a("h4",{attrs:{id:"目的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目的"}},[s._v("#")]),s._v(" 目的")]),s._v(" "),a("p",[s._v("创建并运行一个Redis容器，并且支持数据持久化")]),s._v(" "),a("h4",{attrs:{id:"步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" 步骤")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("步骤一：到DockerHub搜索Redis镜像")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/_/redis",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/redis"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("步骤二：查看Redis镜像文档中的帮助信息")]),s._v(" "),a("p",[s._v("启动redis容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name some-redis -d redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("start with persistent storage（持久化开启）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name some-redis -d redis redis-server --save "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --loglevel warning\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("There are several different persistence strategies to choose from. This one will save a snapshot of the DB every 60 seconds if at least 1 write operation was performed (it will also lead to more logs, so the "),a("code",[s._v("loglevel")]),s._v(" option may be desirable). If persistence is enabled, data is stored in the "),a("code",[s._v("VOLUME /data")]),s._v(", which can be used with "),a("code",[s._v("--volumes-from some-volume-container")]),s._v(" or "),a("code",[s._v("-v /docker/host/dir:/data")]),s._v(" (see "),a("a",{attrs:{href:"https://docs.docker.com/engine/tutorials/dockervolumes/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docs.docker volumes"),a("OutboundLink")],1),s._v(").")]),s._v(" "),a("p",[s._v("For more about Redis Persistence, see http://redis.io/topics/persistence.")])]),s._v(" "),a("p",[s._v("一般我们在run的时候需要指定一下端口，所以命令修改为：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name mr -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6378")]),s._v(":6379 -d redis redis-server --save "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --loglevel warning\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("步骤三：利用docker run 命令运行一个Redis容器")])])]),s._v(" "),a("h4",{attrs:{id:"进入redis容器-并执行redis-cli客户端命令-存入num-666"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入redis容器-并执行redis-cli客户端命令-存入num-666"}},[s._v("#")]),s._v(" 进入redis容器，并执行redis-cli客户端命令，存入num=666")]),s._v(" "),a("ul",[a("li",[s._v("进入容器")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it mr bash")]),s._v("\nroot@6cba24a415a9:/data"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("执行redis-cli客户端命令，查看所有键值对")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("root@6cba24a415a9:/data"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-cli")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" keys *\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("设置数据num=666")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" num "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("666")]),s._v("\nOK\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" keys *\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"num"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上命令可以一步到位：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("容器名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" redis-cli\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"docker数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker数据卷"}},[s._v("#")]),s._v(" Docker数据卷")]),s._v(" "),a("h4",{attrs:{id:"容器与数据耦合的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器与数据耦合的问题"}},[s._v("#")]),s._v(" 容器与数据耦合的问题")]),s._v(" "),a("p",[a("img",{attrs:{src:t(412),alt:"image-20220805142941080"}})]),s._v(" "),a("h4",{attrs:{id:"数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[s._v("#")]),s._v(" 数据卷")]),s._v(" "),a("p",[s._v("数据卷（volume）是一个虚拟目录，指向宿主机文件系统中的某个目录。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(413),alt:"image-20220805143127981"}})]),s._v(" "),a("h4",{attrs:{id:"操作数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作数据卷"}},[s._v("#")]),s._v(" 操作数据卷")]),s._v(" "),a("p",[s._v("数据卷操作的基本语法如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COMMAND"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("docker volume命令是数据卷操作，根据命令后跟随的command来确定下一步的操作：")]),s._v(" "),a("ul",[a("li",[s._v("create\t创建一个volume")]),s._v(" "),a("li",[s._v("inspect\t显示一个或多个volume的信息")]),s._v(" "),a("li",[s._v("ls\t\t列出所有的volume")]),s._v(" "),a("li",[s._v("prune\t\t删除未使用的volume")]),s._v(" "),a("li",[s._v("rm\t\t删除一个或多个指定的volume")])]),s._v(" "),a("h4",{attrs:{id:"创建一个数据卷-并查看数据卷在宿主机的目录位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个数据卷-并查看数据卷在宿主机的目录位置"}},[s._v("#")]),s._v(" 创建一个数据卷，并查看数据卷在宿主机的目录位置")]),s._v(" "),a("p",[s._v("创建数据卷")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看所有数据卷")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看数据卷的详细信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume inspect html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume inspect html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CreatedAt"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2022-08-05T14:40:01+08:00"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mountpoint"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/volumes/html/_data"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"html"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("其中，存储目录（挂载点）为：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mountpoint"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/volumes/html/_data"')]),s._v(",\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /_data为真实存储的")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"挂载数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载数据卷"}},[s._v("#")]),s._v(" 挂载数据卷")]),s._v(" "),a("p",[s._v("我们在创建容器时，可以通过 -v 参数来挂载一个数据卷到某个容器目录")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --name mn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -v html:/root/html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":80\n  nginx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("docker run ：就是创建并运行容器")]),s._v(" "),a("li",[s._v("-- name mn ：给容器起个名字叫mn")]),s._v(" "),a("li",[s._v("-v html:/root/htm ：把html数据卷挂载到容器内的/root/html这个目录中")]),s._v(" "),a("li",[s._v("-p 8080:80 ：把宿主机的8080端口映射到容器内的80端口")]),s._v(" "),a("li",[s._v("nginx ：镜像名称")])]),s._v(" "),a("h4",{attrs:{id:"挂载案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载案例"}},[s._v("#")]),s._v(" 挂载案例")]),s._v(" "),a("p",[s._v("需求说明：上个案例中，我们进入nginx容器内部，已经知道nginx的html目录所在位置/usr/share/nginx/html ，我们需要把这个目录挂载到html这个数据卷上，方便操作其中的内容。")]),s._v(" "),a("p",[s._v("提示：运行容器时使用 -v 参数挂载数据卷")]),s._v(" "),a("p",[s._v("步骤：")]),s._v(" "),a("ul",[a("li",[s._v("创建容器并挂载数据卷到容器内的HTML目录")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name mn -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v(":80 -v html:/usr/share/nginx/html -d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("进入html数据卷所在位置，并修改HTML内容")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看html数据卷的位置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume inspect html\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入该目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/lib/docker/volumes/html/_data\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" index.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("我们进入数据卷的目录位置，可以看到，也有两个文件，此时并没有进入容器内部，所以说明我们挂载成功。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /var/lib/docker/volumes/html/_data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n50x.html  index.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("我们进入index.html文件内进行内容修改，修改完成后，我们要证明确实在容器内也保存成功，我们可以直接打开浏览器查看，确实是修改成功了。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(414),alt:"image-20220805150627188"}})]),s._v(" "),a("p",[s._v('中文乱码的在head标签内加上meta charset="utf-8"即可')]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("另外")])]),a("p",[s._v("如果我们把数据卷删掉，我们在运行新的容器时，将他挂载到一个不存在的卷时，docker会帮我们自动创建这个数据卷。")]),s._v(" "),a("h4",{attrs:{id:"挂载案例2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载案例2"}},[s._v("#")]),s._v(" 挂载案例2")]),s._v(" "),a("p",[s._v("创建并运行一个MySQL容器，将宿主机目录直接挂载到容器")]),s._v(" "),a("p",[s._v("提示：目录挂载与数据卷挂载的语法是类似的：")]),s._v(" "),a("ul",[a("li",[s._v("-v [宿主机目录]:[容器内目录]")]),s._v(" "),a("li",[s._v("-v [宿主机文件]:[容器内文件]")])]),s._v(" "),a("p",[s._v("实现思路如下：")]),s._v(" "),a("ul",[a("li",[s._v("将mysql.tar文件上传到服务器，通过load命令加载为镜像")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" load -i mysql.tar\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("创建目录/tmp/mysql/data")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p mysql/data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("创建目录/tmp/mysql/conf，将hmy.cnf文件上传到/tmp/mysql/conf")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p mysql/conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("去DockerHub查阅资料，创建并运行MySQL容器，要求：")]),s._v(" "),a("p",[s._v("1.挂载/tmp/mysql/data到mysql容器内数据存储目录")]),s._v(" "),a("p",[s._v("2.挂载/tmp/mysql/conf/hmy.cnf到mysql容器的配置文件")]),s._v(" "),a("p",[s._v("3.设置MySQL密码")])])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/_/mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/mysql"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("-e：环境变量，可以让我们一个命令就设置密码")]),s._v(" "),a("p",[s._v("记得开放对应端口")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --name mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v(":3306 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n -v /tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n -v /tmp/mysql/data:/var/lib/mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n -d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n mysql:5.7.25\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("关于两个冒号后面的路径，我们查阅官网可知：")]),s._v(" "),a("p",[s._v("conf配置文件在路径：")]),s._v(" "),a("blockquote",[a("p",[s._v("The default configuration for MySQL can be found in "),a("code",[s._v("/etc/mysql/my.cnf")]),s._v(", which may "),a("code",[s._v("!includedir")]),s._v(" additional directories such as "),a("code",[s._v("/etc/mysql/conf.d")]),s._v(" or "),a("code",[s._v("/etc/mysql/mysql.conf.d")]),s._v(". Please inspect the relevant files and directories within the "),a("code",[s._v("mysql")]),s._v(" image itself for more details.")])]),s._v(" "),a("p",[s._v("data文件在路径：")]),s._v(" "),a("blockquote",[a("p",[s._v("/var/lib/mysql")])]),s._v(" "),a("h3",{attrs:{id:"数据挂载的方式对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据挂载的方式对比"}},[s._v("#")]),s._v(" 数据挂载的方式对比")]),s._v(" "),a("p",[a("img",{attrs:{src:t(415),alt:"image-20220805162556746"}})]),s._v(" "),a("p",[s._v("docker run的命令中通过 -v 参数挂载文件或目录到容器中：")]),s._v(" "),a("ol",[a("li",[s._v("-v volume名称:容器内目录")]),s._v(" "),a("li",[s._v("-v 宿主机文件:容器内文件")]),s._v(" "),a("li",[s._v("-v 宿主机目录:容器内目录")])]),s._v(" "),a("p",[s._v("数据卷挂载与目录直接挂载")]),s._v(" "),a("ol",[a("li",[s._v("数据卷挂载耦合度低，由docker来管理目录，但是目录较深，不好找")]),s._v(" "),a("li",[s._v("目录挂载耦合度高，需要我们自己管理目录，不过目录容易寻找查看")])]),s._v(" "),a("h3",{attrs:{id:"docker镜像结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像结构"}},[s._v("#")]),s._v(" Docker镜像结构")]),s._v(" "),a("p",[s._v("镜像是将应用程序及其需要的系统函数库、环境、配置、依赖打包而成。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(416),alt:"image-20220805163300868"}})]),s._v(" "),a("h3",{attrs:{id:"自定义镜像-dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义镜像-dockerfile"}},[s._v("#")]),s._v(" 自定义镜像(Dockerfile)")]),s._v(" "),a("p",[s._v("Dockerfile就是一个文本文件，其中包含一个个的指令(Instruction)，用指令来说明要执行什么操作来构建镜像。每一个指令都会形成一层Layer。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(417),alt:"image-20220805163800476"}})]),s._v(" "),a("p",[s._v("语法说明，请参考官网文档： "),a("a",{attrs:{href:"https://docs.docker.com/engine/reference/builder",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/reference/builder"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"基于java-8-alpine镜像-将一个java项目构建为镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基于java-8-alpine镜像-将一个java项目构建为镜像"}},[s._v("#")]),s._v(" 基于java:8-alpine镜像，将一个Java项目构建为镜像")]),s._v(" "),a("p",[s._v("实现思路如下：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("新建一个空的目录，然后在目录中新建一个文件，命名为Dockerfile")])]),s._v(" "),a("li",[a("p",[s._v("拷贝课前资料提供的docker-demo.jar到这个目录中")])]),s._v(" "),a("li",[a("p",[s._v("编写Dockerfile文件：")]),s._v(" "),a("p",[s._v("基于java:8-alpine作为基础镜像")]),s._v(" "),a("p",[s._v("将app.jar拷贝到镜像中")]),s._v(" "),a("p",[s._v("暴露端口")]),s._v(" "),a("p",[s._v("编写入口ENTRYPOINT")])]),s._v(" "),a("li",[a("p",[s._v("使用docker build命令构建镜像")])]),s._v(" "),a("li",[a("p",[s._v("使用docker run创建容器并运行")])])]),s._v(" "),a("p",[s._v("Dockerfile文件：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定基础镜像")]),s._v("\nFROM java:8-alpine\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝java项目的包")]),s._v("\nCOPY ./docker-demo.jar /tmp/app.jar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 暴露端口")]),s._v("\nEXPOSE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8090")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 入口，java项目的启动命令")]),s._v("\nENTRYPOINT java -jar /tmp/app.jar\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("使用build命令构建镜像：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-8-14-centos docker-demo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -t javaweb:1.0 .")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注意：记得要加 .  这个点代表的是dockerfile文件所在的目录。")]),s._v(" "),a("p",[s._v("构建好了之后，我们可以run一下镜像了。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name web -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8090")]),s._v(":8090 -d javaweb:1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:t(418),alt:"image-20220805170818923"}})]),s._v(" "),a("h3",{attrs:{id:"dockercompose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockercompose"}},[s._v("#")]),s._v(" DockerCompose")]),s._v(" "),a("h4",{attrs:{id:"什么是dockercompose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是dockercompose"}},[s._v("#")]),s._v(" 什么是DockerCompose")]),s._v(" "),a("ul",[a("li",[s._v("Docker Compose可以基于Compose文件帮我们快速的部署分布式应用，而无需手动一个个创建和运行容器！")]),s._v(" "),a("li",[s._v("Compose文件是一个文本文件，通过指令定义集群中的每个容器如何运行。")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3.8"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.7.25\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(" \n    volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/tmp/mysql/data:/var/lib/mysql"')]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf"')]),s._v("\n  web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    ports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8090:8090"')]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("DockerCompose的详细语法参考官网："),a("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/compose/compose-file/"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"安装dockercompose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装dockercompose"}},[s._v("#")]),s._v(" 安装DockerCompose")]),s._v(" "),a("p",[s._v("上传到"),a("code",[s._v("/usr/local/bin/")]),s._v("目录。Linux下需要通过命令下载：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://github.com/docker/compose/releases/download/1.23.1/docker-compose-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -s"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -m"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"修改文件权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改文件权限"}},[s._v("#")]),s._v(" 修改文件权限")]),s._v(" "),a("p",[s._v("修改文件权限：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"base自动补全命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#base自动补全命令"}},[s._v("#")]),s._v(" Base自动补全命令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 补全命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -L https://raw.githubusercontent.com/docker/compose/1.29.1/contrib/completion/bash/docker-compose "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/bash_completion.d/docker-compose\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("如果这里出现错误，需要修改自己的hosts文件：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"199.232.68.133 raw.githubusercontent.com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"dockercompose部署微服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockercompose部署微服务"}},[s._v("#")]),s._v(" DockerCompose部署微服务")]),s._v(" "),a("p",[s._v("实现思路如下：")]),s._v(" "),a("ul",[a("li",[s._v("编写docker-compose文件")]),s._v(" "),a("li",[s._v("修改自己的cloud-demo项目，将数据库、nacos地址都命名为docker-compose中的服务名")]),s._v(" "),a("li",[s._v("使用maven打包工具，将项目中的每个微服务都打包为app.jar")]),s._v(" "),a("li",[s._v("将打包好的app.jar拷贝到cloud-demo中的每一个对应的子目录中")]),s._v(" "),a("li",[s._v("将cloud-demo上传至虚拟机，利用 docker-compose up -d 来部署")])])])}),[],!1,null,null,null);a.default=n.exports}}]);